---
title: "Solar Power"
output: 
  html_document: 
    toc: yes
    keep_md: yes
    fig_caption: yes
---

## intro

This is the May 3rd 2022 tidytuesday dataset exploration about solar power. It is my first tidytuesday since August 31 2021. I will start small by walking through some elementary steps using `R`. 

## Load libraries, get data 

```r
#load libraries
library(tidytuesdayR)
library(tidyverse)

# get the data
capacity <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/capacity.csv')
wind <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/wind.csv')
solar <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/solar.csv')
average_cost <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-03/average_cost.csv')
```

## Explore the data

Let's start exploring!

### average cost exploration 

First, have a look at the `average_cost` data itself. 

```r
average_cost
```

```
## # A tibble: 13 x 4
##     year gas_mwh solar_mwh wind_mwh
##    <dbl>   <dbl>     <dbl>    <dbl>
##  1  2009    57.6     168.      74.3
##  2  2010    56.8     140.      65.5
##  3  2011    46.0     111.      47.8
##  4  2012    44.5      84.1     40.1
##  5  2013    43.2      68.9     28.7
##  6  2014    46.1      57.3     26.6
##  7  2015    47.1      46.3     31.2
##  8  2016    39.8      39.3     25.6
##  9  2017    38.1      37.8     18.4
## 10  2018    34.5      27.0     16.7
## 11  2019    30.7      21.9     23.8
## 12  2020    25.7      22.8     29.3
## 13  2021    26.6      23.1     NA
```
Now make a very simple line plot.


```r
average_cost %>%
  ggplot(aes(year,gas_mwh)) +
  geom_line()
```

![](2022_05_03_solar_files/figure-html/unnamed-chunk-2-1.png)<!-- -->

I want to put all three quantities (gas, solar, and wind) on the same plot so that means reshaping the data to make a wide table into a long (or tall) table.


```r
average_cost_long<- average_cost %>%
  pivot_longer(
    cols = gas_mwh:wind_mwh, 
    names_to = "fuel_type", 
    values_to = "sourced_dollars_per_MWh",
    values_drop_na = TRUE) %>%
  mutate(fuel_type = str_replace_all(fuel_type,pattern="_mwh", replacement=""))

head(average_cost_long)
```

```
## # A tibble: 6 x 3
##    year fuel_type sourced_dollars_per_MWh
##   <dbl> <chr>                       <dbl>
## 1  2009 gas                          57.6
## 2  2009 solar                       168. 
## 3  2009 wind                         74.3
## 4  2010 gas                          56.8
## 5  2010 solar                       140. 
## 6  2010 wind                         65.5
```
Now, a plot with all three fuel types.

```r
average_cost_long%>%
  ggplot(aes(year,sourced_dollars_per_MWh, color=fuel_type))+
  geom_line()
```

![](2022_05_03_solar_files/figure-html/unnamed-chunk-4-1.png)<!-- -->

Plot cleanup. Give a title, label the axes, make the lines thicker.


```r
average_cost_long%>%
  ggplot(aes(year,sourced_dollars_per_MWh, color=fuel_type))+
  geom_line(size=2) +
  xlab("year")+
  ylab("Sourced $ per MWh")+
  ggtitle("Sourced $ per MWh for different fuel types")
```

![](2022_05_03_solar_files/figure-html/unnamed-chunk-5-1.png)<!-- -->

Reduce clutter by labeling the y-axis with dollar signs, removing the x axis label, and renaming `fuel_type` to `fuel type` in the legend. 


```r
average_cost_long%>%
  ggplot(aes(year,sourced_dollars_per_MWh, color=fuel_type))+
  geom_line(size=2)+
  scale_y_continuous(labels=scales::dollar_format())+
  ggtitle("Sourced $ per MWh for different fuel types")+
  theme(axis.title.x=element_blank(), 
        #axis.text.x=element_blank(),
        #axis.ticks.x=element_blank(),
        axis.title.y=element_blank(), 
        #axis.text.y=element_blank(),
        #axis.ticks.y=element_blank()
        )+
  labs(color="fuel type")
```

![](2022_05_03_solar_files/figure-html/unnamed-chunk-6-1.png)<!-- -->
Remove the gray background, add a marker for every year, and make the major y axis interval 25 with minor 5.


```r
average_cost_long%>%
  ggplot(aes(year,sourced_dollars_per_MWh, color=fuel_type))+
  geom_line(size=2)+
  scale_y_continuous(breaks=seq(0, 200, by=25),labels=scales::dollar_format())+
  scale_x_continuous(breaks=seq(2009, 2021, by=2))+
  ggtitle("Sourced $ per MWh for different fuel types")+
  theme(axis.title.x=element_blank(), 
        #axis.text.x=element_blank(),
        #axis.ticks.x=element_blank(),
        axis.title.y=element_blank(), 
        #axis.text.y=element_blank(),
        #axis.ticks.y=element_blank()
        )+
  labs(color="fuel type")+
  theme_light()
```

![](2022_05_03_solar_files/figure-html/unnamed-chunk-7-1.png)<!-- -->
